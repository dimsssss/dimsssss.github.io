---
title:  "도메인 주도 개발 5장을 읽고"
date: 2024-05-25T16:27:45+09:00
categories: 
    - 도메인 주도 개발
tags:
    - 소프트웨어 설계
---

Model에 대한 여러가지 표현을 나타낸다. 즉 Model 하나가 다양하게 표현될 수 있다. 예를 들어 연관관계, 엔티티, 값 객체, 서비스 기타 등등 다양하게 나타난다

> [!NOTE] 객체지향 프로그래밍과의 차이점
> 재밌는 것은 기존의 객체 지향 방식과는 사뭇 다르다. 예를 들어 객체 지향 코딩은 데이터와 이것을 사용하는 동작을 하나의 객체로 묶는다. 외부에서 해당 데이터에 직접 접근할 수 없고 오로지 객체를 통해서만 가능하다. Model에서는 동작만 따로 표현한 내용이 있다. 즉 데이터와 동작이 분리될 수 있다.
## 연관 관계
현실 세계에서는 수 많은 다대다 관계가 있는데 이는 구현과 유지보수를 어렵다. 초기의 모델링한 결과는 대부분 다대다 관계가 많은데 다음과 같은 방법으로 연관 관계를 쉽게 다룰 수 있다.

1. 탐색 방향을 부여한다
2. 한정자를 추가해서 사실상 다중성을 줄인다
3. 중요하지 않은 연관 관계를 제거한다


위의 방법으로 모델링을 한 예로 아래가 있다.
초기에 국가와 사람을  모델링 하면 국가 하나는 여러 명의 사람을 갖을 수 있다
즉 M : N의 관계를 갖는다

여기에 제약 조건을 달거나 구체적으로 표현하면 연관 관계는 달라질 수 있다
국가와 사람 사이에 대통령이라는 조건을 달면 연관 관계는 1:N으로 변경된다
국가에는 대통령이 존재하지만 사람은 대통령이 아닐 수 있다. 
이것은 양방향에서 단방향으로 범위를 줄인다
1970년의 미국 대통령이라는 조건을 달면 연관 관계는 1:1로 변경된다
최종적으로 다음과 같은 모델링의 변화가 나타난다

![](https://i.imgur.com/xtv60SF.png)


> [!NOTE] 데이터베이스와 어플리케이션에서 사용하는 연관 관계의 차이점
> 데이터베이스 연관 관계와 어플리케이션 모델 연관 관계가 달라질 수 있다는 것을 깨달았다.  데이터베이스는 구체적인 조건보다는 최종적으로 저장되는 데이터들의 관계를 표현한다. 어플리케이션은 최종 결과보다 현재 결과를 표현하는 것에 집중한다는 것을 깨달았다.


## 서비스
특정 객체에 포함되기 어려운 연산을 분리한 인터페이스. 잘 만들어진 서비스는 아래의 특징을 갖고 있다
1. 연산이 원래부터 엔티티나 값 객체의 일부를 구성하는 것이 아니라 도메인 개념과 관련돼 있다.
2. 인터페이스가 도메인 모델의 외적 요소의 측면에서 정의된다.
3. 연산이 상태를 갖지 않는다.

서비스라는 개념은 도메인 계층 이외에서도 나타나는데 경계선을 정하는 것이 중요하다.


## 모듈
정확하게 무엇이라고 정의하기 어렵다. 
인지적 과부화를 방지하기 위해서 사용한다고 설명을 했다.
그러면 일반적인 전제 조건은 규모가 크고 복잡한 코드 덩어리이다.
응집성이 높고 모듈간 결합도가 낮아야 한다. 는 조건을 보면 잘 분리되어야 한다 정도??
다양한 곳에서 의존을 하기 때문에 약간 근본적인 개념을 담은 모델이라고 생각이 든다.
모듈이 수정되면 많은 곳을 수정하게 된다.
